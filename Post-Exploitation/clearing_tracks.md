
# Clearing Your Tracks on Windows & Linux  
*A creative but accurate expansion of your notes ‚Äî no info removed, only enhanced and structured clearly for documentation.*

---

# üïµÔ∏è‚Äç‚ôÇÔ∏è Clearing Your Tracks on Windows

During a penetration test, exploitation and post-exploitation often involve **changing system state**, **deploying tools**, **executing binaries**, and **interacting with sensitive data**.  
Because of this, **clean-up is a mandatory phase**, guided strictly by the **Rules of Engagement (RoE)**.

Cleaning up ensures:
- You leave the target in the same condition you found it.  
- You avoid disrupting normal operations.  
- You don‚Äôt unintentionally leave malicious artifacts behind.  
- You maintain professional integrity as a pentester.

---

## üìÅ Managing Your Artifacts (Important Best Practice)

Whenever you upload scripts, exploits, payloads, or binaries:

‚úî **Always track where you store them.**  
‚úî **Use predictable temporary directories.**

Recommended:
- **Windows:** `C:\Temp\`  
- **Linux:** `/tmp/`

These directories:
- Are writable by low-privilege users.
- Are commonly used for temporary testing.
- Are automatically cleared upon reboot (most of the time).

> ‚ö†Ô∏è If you place your payloads in Temp on a real organization‚Äôs machine, expect them to vanish on restart.

---

## üß∞ MSF (Metasploit) Considerations

Metasploit is powerful ‚Äî **and messy**.

It often:
- Leaves artifacts such as *payload stagers*, *dlls*, *scripts*, and *service entries*.
- Creates directories in obscure paths.
- Registers persistence mechanisms during post modules.

Some well-designed MSF modules include:
- Instructions on clean-up  
- Auto-generated **resource scripts** (`.rc` files)  
- File paths showing where artifacts were dropped  

To execute an MSF resource cleanup script:

```bash
resource <path_to_script.rc>


This removes services, payloads, and registry changes created by that module.

---

## üóëÔ∏è Clearing Windows Event Logs (‚ö†Ô∏è Use ONLY if Allowed)

A **typical but risky** post-exploitation task is wiping the Windows Event Log.

However:
‚ùó **This should be avoided during professional penetration tests.**
Reason: Event logs contain valuable forensic information needed by the client.

In MSF Meterpreter:

```bash
clearev
```

What it does:

* Clears Windows Security, System, and Application logs.

> üö® **Warning:** Clearing logs is a high-alert action and will get noticed by Blue Teams.
> Only perform if specifically authorized.

---

---

# üêß Clearing Your Tracks on Linux

Linux clean-up is usually simpler ‚Äî **no built-in event log like Windows**, but traces can still exist.

## üìÅ Use `/tmp` for Temporary Files

Navigate to the root temp directory:

```bash
cd /tmp
```

Why `/tmp`?

* World-writable
* Common for temporary tools
* Cleared automatically on many systems after reboot

Again:

> ‚ö†Ô∏è Any payload placed in `/tmp` is usually deleted after system reboot.

Linux rarely provides automated clean-up scripts like MSF does for Windows, so manual removal is typical.

---

## üìú Bash History (One of the Biggest Footprints)

Linux shells silently track EVERYTHING you type unless disabled.

### Key files:

* `.bashrc`

  * Defines shell behavior
* `.bash_history`

  * Stores the actual command history

Instead of deleting the entire file (which is suspicious), delete *selective* entries‚Äîespecially dangerous ones like:

* Privilege escalation attempts
* Enumeration commands
* File transfers
* Reverse shell setups

### Option 1 ‚Äî remove specific lines

Open with a text editor:

```bash
nano ~/.bash_history
```

Delete only problem entries.

---

### Option 2 ‚Äî Clear history for the current session

This works *temporarily*:

```bash
history -c
```

Problem:

* The moment you exit the shell, history may still be written from memory.

---

### Option 3 ‚Äî Proper wipe (recommended only when permitted)

```bash
cat /dev/null > ~/.bash_history
```

This empties the file without deleting it, which looks far less suspicious.

---

# üßπ Summary Cheat Sheet

### **Windows**

* Store payloads in `C:\Temp`
* Use MSF resource scripts for cleanup:

  ```bash
  resource <script.rc>
  ```
* Avoid clearing event logs unless explicitly allowed:

  ```bash
  clearev
  ```

### **Linux**

* Work from `/tmp`
* History clean-up:

  ```bash
  history -c
  cat /dev/null > ~/.bash_history
  ```
* Remove artifacts manually
* No automated cleanup like MSF for Windows

---
